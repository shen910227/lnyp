var paid={};paid.getList=function(){var a=document.getElementById("paidbox");if(a.scrollHeight==a.clientHeight){paid.getOrder(a)}};paid.gotoNext=function(a){if(a.obj.Is_Flowcard==0){if(a.obj.Type_Flag==4){ai.alert("该券无法使用");return false}location.href=location.origin+location.pathname+"?Is_Flowcard"}else{localStorage.lnyppaidno=a.obj.Id;localStorage.lnyppaidm=a.obj.Porduct_Name;localStorage.lnypstime=a.obj.Effective_Begin_Time;localStorage.lnypetime=a.obj.Effective_End_Time;location.href="../trafficPack/trafficPack.html"}};paid.addTouchScroll=function(){var a=document.querySelectorAll(".paidList");var b=undefined;var g={};g.lock=false;g.act=false;for(var c=0;c<a.length;c++){a[c].addEventListener("touchstart",e);a[c].addEventListener("touchmove",f);a[c].addEventListener("touchend",d)}function e(h){var i=h.currentTarget.style.webkitTransform;g.dval=/\d{2,3}(?=px)/g.exec(i);if(g.dval==null){g.dval=0}else{g.dval=Number(g.dval[0])}b=h.currentTarget;g.y=h.touches[0].pageY;h.currentTarget.style.webkitTransitionProperty="none"}function f(h){var j=b.scrollHeight-b.clientHeight;var k=b.scrollTop;if(g.y-h.touches[0].pageY<0&&k==0){i()}else{if(k>=j&&g.y-h.touches[0].pageY>0){i()}}function i(){h.preventDefault();g.lock=true;if(g.y-h.touches[0].pageY>0){g.act=true;k=-(g.y-h.touches[0].pageY)/(g.y/h.touches[0].pageY*2);if(g.dval>=0){g.dval=-g.dval}}else{g.act=false;k=-(g.y-h.touches[0].pageY)/(h.touches[0].pageY*2/g.y)}h.currentTarget.style.webkitTransform="translate3d(0px, "+(k+g.dval)+"px, 0px)"}}function d(h){if(g.lock){g.lock=false;if(g.act){paid.getOrder(h.currentTarget);h.currentTarget.style.webkitTransitionProperty="-webkit-transform";h.currentTarget.style.webkitTransform="translate3d(0px, -50px, 0px)"}else{paid.getOrder(h.currentTarget,true);h.currentTarget.style.webkitTransitionProperty="-webkit-transform";h.currentTarget.style.webkitTransform="translate3d(0px, 50px, 0px)"}}}};paid.getOrder=function(a,b){var c;if(a.dataset.index==undefined||b){c=1;a.dataset.index=1}else{c=(Number(a.dataset.index)+1);a.dataset.index=c}ai.post("CouponServer/CMCCFlow/GainCMCCFlowOrderList",{}).load(function(g){if(b==true){var e=a.firstElementChild;e.removeAttribute("style");a.dataset.index=1;a.innerHTML="";a.appendChild(e)}if(g.Data.length!=0){ai.repeat(a,g.Data);a.style.webkitTransform="translate3d(0px, 0px, 0px)";a.style.display="block";var d=a.children;for(var f=1;f<d.length;f++){if(d[f].obj.Is_Flowcard==0){d[f].style.backgroundColor="#E3E3E3"}}}else{document.getElementById("ticketno").style.display="block"}},false)};paid.addBackAppEvt=function(){document.querySelector(".back-butII").addEventListener("click",function(a){location.href=location.origin+location.pathname+"?backnetflow"})};paid.exe=function(){paid.addBackAppEvt();var d=location.search;var a=d.indexOf("token");var b=d.indexOf("Is_Flowcard");var e=d.indexOf("backnetflow");if(a==-1){if(localStorage.lnyptoken==undefined){ai.confirm("请登录","返回登陆",function(){var g=location.pathname;var f=g.substring(0,g.indexOf("/",1));location.href=location.origin+f+"/templates/login/login.html"});return false}}if(b==-1&&e==-1){var c=d.substring((a+6));localStorage.lnyptoken=c}paid.getList()};typeof(window.ai)==="undefined"?document.addEventListener("aideload",function(){ai.ready(paid.exe)}):ai.ready(paid.exe);